!function(e){e.ADMBase=function(a){this.message=a;var s=e.ADMBase.defaults;e(".clippy").length>0&&e(".clippy").clippy({clippy_path:s.clippy_swf}),e("body").on({ajaxStart:function(){e(this).css({cursor:"progress"})},ajaxStop:function(){e(this).css({cursor:"default"})}}),e(s.selectable).length>0&&e(s.selectable).on("click",function(){e(this).select()})},e.ADMBase.prototype={highest_zindex:function(){var a=-999;return e("*").each(function(){var s=parseInt(e(this).css("z-index"),10);s&&a<s&&(a=s)}),parseInt(a)},blink_element:function(e,a){""!==a?e.addClass("admwpp-blink").addClass(a):e.addClass("admwpp-blink"),setTimeout(function(){""!==a?e.removeClass("admwpp-blink").removeClass(a):e.removeClass("admwpp-blink")},800)},validate:function(){var a,s,t=e.ADMBase.defaults,i=e("input[required='true']"),n=!0;return i.each(function(){switch(a=e(this),a.attr("type")){case"hidden":s=e("#"+a.attr("target")),a.val()?(n=n&&!0,s.removeClass(t.required)):(n=n&&!1,s.addClass(t.required));break;case"radio":if(e(':radio:checked[name="'+a.attr("name")+'"]')[0])n=n&&!0,a.closest("fieldset").removeClass(t.required);else n=n&&!1,a.closest("fieldset").addClass(t.required);break;default:a.val()?(n=n&&!0,a.removeClass(t.required)):(n=n&&!1,a.addClass(t.required))}}),e("."+t.required).effect("highlight",{},1e3),n||this.message.display_message({message:"Please fill required fields.",success:!1}),n},is_int:function(e){return parseFloat(e)===parseInt(e,10)&&!isNaN(e)},is_active_editor:function(){var e=!1;return null!==tinymce.activeEditor&&(tinymce.activeEditor.isHidden()||(e=!0)),e},url_param:function(e){var a=new RegExp(e+"=(.+?)(&|$)");return decodeURI((a.exec(location.search)||[,null])[1])},url_params:function(){var e,a,s=[],t=window.location.href,i=t.slice(t.indexOf("?")+1).split("&");for(a=0;a<i.length;a++)e=i[a].split("="),s.push(e[0]),s[e[0]]=e[1];return s},trim_text:function(a,s,t){return a.length>s?e.trim(a).substring(0,s).split(" ").slice(0,-1).join(" ")+t:a}},e.ADMBase.defaults={clippy_swf:admwpp.baseUrl+"assets/js/plugins/clippy/clippy.swf",admin_bar:"#wpadminbar",required:"admwpp-required",loader:".admwpp-loader-image",meta_loader:".admwpp-loader",selectable:".admwpp-selectable",loadingClass:"admwpp-loading"}}(jQuery),function(e){e.ADMMessage=function(){var a=e.ADMMessage.defaults;if(0==e(a.confirm_dialog).length){"<p><span id='admwpp-confirm-dialog-message'></span></p>","</div>",e("body").append("<div id='admwpp-dialog-confirm' class='admwpp-dialog-confirm'><p><span id='admwpp-confirm-dialog-message'></span></p></div>")}e(a.message_box+".show").length>0&&(e(a.message_box).appendTo("body"),this.message_position(a.message_box),setTimeout(function(){e(a.message_box).slideUp("slow",function(){e(this).removeClass("show")})},2e3))},e.ADMMessage.prototype={display_message:function(a){var s=this,t=e.ADMMessage.defaults,i=e.extend(!1,{},t.message_options,a);0===e(t.message_box).length?e("<div id='admwpp-message-box'></div>").appendTo("body"):e(t.message_box).appendTo("body"),e(t.message_box).each(function(){var t=e(this);s.message_position(t),t.html(a.message),i.success?(t.removeClass("error"),t.addClass("success")):(t.removeClass("success"),t.addClass("error")),t.slideDown("slow"),i.auto_hide&&setTimeout(function(){t.slideUp("slow")},5e3)})},message_position:function(a){var s=e.ADMMessage.defaults;e(s.admin_bar).length>0&&e(s.message_box).length>0&&e(s.message_box).css("top",e(s.admin_bar).height()+"px")},confirm_dialog:function(a){var s=e.ADMMessage.defaults,t=e.extend(!1,{},s.confirm_options,a);e(t.id+" "+t.message_id).html(t.message),t.width>t.maxWidth&&(t.width=t.maxWidth),e(t.id).dialog({resizable:!1,minHeight:200,modal:!0,draggable:!1,buttons:t.buttons,title:t.title,dialogClass:t.dialogClass,show:t.show,width:t.width,close:t.close})}},e.ADMMessage.defaults={confirm_options:{id:"#admwpp-dialog-confirm",width:300,maxWidth:1e3,dialogClass:"admwpp-dialog",message:"Are you sure?",message_id:"#admwpp-confirm-dialog-message",title:"Are you sure?",show:{effect:"fade",duration:300},close:function(){}},message_options:{message:"Success!",success:!0,auto_hide:!0},admin_page:".wp-admin",admin_bar:"#wpadminbar",message_box:"#admwpp-message-box",confirm_dialog:".admwpp-dialog-confirm"}}(jQuery),function(e){e.ADMMetabox=function(a,s){var t=this;t.base=a,t.message=s;var i=e.ADMMetabox.defaults;e.ADMBase.defaults;t.call=0;i=e.ADMMetabox.defaults;e(i.partnersInput).autocomplete({source:function(a,s){var i={_uri:"search/partners",query:a.term};t.call&&4!==t.call.readystate&&(t.call.abort(),t.call=null),t.call=e.ajax({type:"get",url:admwpp.routeUrl,data:i,dataType:"json",success:function(e){e&&s(e)}})},minLength:3,select:function(a,s){s.item.value&&(e(i.partnerIdHidden).val(s.item.value),e(i.partnerNameHidden).val(s.item.label),e(i.partnerNameDisplay).html(s.item.label))},close:function(){e(i.partnersInput).val("").removeClass("ui-autocomplete-loading")}})},e.ADMMetabox.prototype={},e.ADMMetabox.defaults={partnersInput:"#admwpp-partners-search",partnerIdHidden:"#admwpp-partner-id",partnerNameHidden:"#admwpp-partner-name",partnerNameDisplay:"#admwpp-selected-partner-name"}}(jQuery),function(e){e.ADMSettings=function(a,s){var t=this;t.base=a,t.message=s;var i=e.ADMSettings.defaults,n=e.ADMBase.defaults;t.call=0;i=e.ADMSettings.defaults;e(i.importCategoriesBtn).on("click",function(){var a=e(this);a.hasClass(n.loadingClass)||(a.data("page",1),a.data("imported",0),a.data("exists",0),t.importCategories(a))}),e(i.importCoursesBtn).on("click",function(){var a=e(this);a.hasClass(n.loadingClass)||(a.data("page",1),a.data("imported",0),a.data("exists",0),t.importCourses(a))}),e(i.importLearningPathBtn).on("click",function(){var a=e(this);a.hasClass(n.loadingClass)||(a.data("page",1),a.data("imported",0),a.data("exists",0),t.importLearningPathes(a))})},e.ADMSettings.prototype={importCategories:function(a){var s=this,t=e.ADMSettings.defaults,i=e.ADMBase.defaults;if(!a.hasClass(i.loadingClass)){a.addClass(i.loadingClass);var n=parseInt(a.data("page")),o=parseInt(a.data("per_page")),r=parseInt(a.data("imported")),d=parseInt(a.data("exists")),p={_uri:"settings/importLearningCategories",page:n,per_page:o,imported:r,exists:d};e.ajax({type:"get",url:admwpp.routeUrl,data:p,dataType:"json",contentType:"application/json; charset=utf-8",success:function(o){a.removeClass(i.loadingClass),a.data("imported",o.imported),a.data("exists",o.exists),o.hasNextPage&&(n+=1,a.data("page",n),s.importCategories(a)),o.message&&e(t.importInfoCat).html(o.message)}})}},importCourses:function(a){var s=this,t=e.ADMSettings.defaults,i=e.ADMBase.defaults;if(!a.hasClass(i.loadingClass)){a.addClass(i.loadingClass);var n=parseInt(a.data("page")),o=parseInt(a.data("per_page")),r=parseInt(a.data("imported")),d=parseInt(a.data("exists")),p={_uri:"settings/importCourses",page:n,per_page:o,imported:r,exists:d};e.ajax({type:"get",url:admwpp.routeUrl,data:p,dataType:"json",contentType:"application/json; charset=utf-8",success:function(o){a.removeClass(i.loadingClass),a.data("imported",o.imported),a.data("exists",o.exists),o.hasNextPage&&(n+=1,a.data("page",n),s.importCourses(a)),o.message&&e(t.importInfoCourses).html(o.message)}})}},importLearningPathes:function(a){var s=this,t=e.ADMSettings.defaults,i=e.ADMBase.defaults;if(!a.hasClass(i.loadingClass)){a.addClass(i.loadingClass);var n=parseInt(a.data("page")),o=parseInt(a.data("per_page")),r=parseInt(a.data("imported")),d=parseInt(a.data("exists")),p={_uri:"settings/importLearningPathes",page:n,per_page:o,imported:r,exists:d};e.ajax({type:"get",url:admwpp.routeUrl,data:p,dataType:"json",contentType:"application/json; charset=utf-8",success:function(o){a.removeClass(i.loadingClass),a.data("imported",o.imported),a.data("exists",o.exists),o.hasNextPage&&(n+=1,a.data("page",n),s.importLearningPathes(a)),o.message&&e(t.importInfoLp).html(o.message)}})}}},e.ADMSettings.defaults={importCategoriesBtn:"#admwpp-import-categories-button",importCoursesBtn:"#admwpp-import-courses-button",importLearningPathBtn:"#admwpp-import-learning-path-button",importInfoCat:"#admwpp-import-info-categories",importInfoCourses:"#admwpp-import-info-courses",importInfoLp:"#admwpp-import-info-learning-path"}}(jQuery),function(e){e(document).ready(function(){var a=new e.ADMMessage,s=new e.ADMBase(a);new e.ADMSettings(s,a),new e.ADMMetabox(s,a)})}(jQuery);