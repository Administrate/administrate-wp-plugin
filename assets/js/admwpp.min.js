!function(e){e.ADMMessage=function(){var a=e.ADMMessage.defaults;if(0==e(a.confirm_dialog).length){"<p><span id='admwpp-confirm-dialog-message'></span></p>","</div>",e("body").append("<div id='admwpp-dialog-confirm' class='admwpp-dialog-confirm'><p><span id='admwpp-confirm-dialog-message'></span></p></div>")}e(a.message_box+".show").length>0&&(e(a.message_box).appendTo("body"),this.message_position(a.message_box),setTimeout(function(){e(a.message_box).slideUp("slow",function(){e(this).removeClass("show")})},2e3))},e.ADMMessage.prototype={display_message:function(a){var s=this,o=e.ADMMessage.defaults,t=e.extend(!1,{},o.message_options,a);0===e(o.message_box).length?e("<div id='admwpp-message-box'></div>").appendTo("body"):e(o.message_box).appendTo("body"),e(o.message_box).each(function(){var o=e(this);s.message_position(o),o.html(a.message),t.success?(o.removeClass("error"),o.addClass("success")):(o.removeClass("success"),o.addClass("error")),o.slideDown("slow"),t.auto_hide&&setTimeout(function(){o.slideUp("slow")},5e3)})},message_position:function(a){var s=e.ADMMessage.defaults;e(s.admin_bar).length>0&&e(s.message_box).length>0&&e(s.message_box).css("top",e(s.admin_bar).height()+"px")},confirm_dialog:function(a){var s=e.ADMMessage.defaults,o=e.extend(!1,{},s.confirm_options,a);e(o.id+" "+o.message_id).html(o.message),o.width>o.maxWidth&&(o.width=o.maxWidth),e(o.id).dialog({resizable:!1,minHeight:200,modal:!0,draggable:!1,buttons:o.buttons,title:o.title,dialogClass:o.dialogClass,show:o.show,width:o.width,close:o.close})}},e.ADMMessage.defaults={confirm_options:{id:"#admwpp-dialog-confirm",width:300,maxWidth:1e3,dialogClass:"admwpp-dialog",message:"Are you sure?",message_id:"#admwpp-confirm-dialog-message",title:"Are you sure?",show:{effect:"fade",duration:300},close:function(){}},message_options:{message:"Success!",success:!0,auto_hide:!0},admin_page:".wp-admin",admin_bar:"#wpadminbar",message_box:"#admwpp-message-box",confirm_dialog:".admwpp-dialog-confirm"}}(jQuery),function(e){e.ADMShortcode=function(a){var s=this;s.message=a,s.call=0;var o=e.ADMShortcode.defaults;e(o.giftVoucherFormAmountValidate).length>0&&e(o.giftVoucherFormAmountValidate).on("change keyup",function(a){var o=e(this);s.isValidGiftVoucherInput(o)}),e(o.giftVoucherFormBtn).length>0&&e(o.giftVoucherFormBtn).on("click",function(a){a.preventDefault();var o=e(this);s.addGiftVoucher(o)})},e.ADMShortcode.prototype={isValidGiftVoucherInput:function(a){var s=e.ADMShortcode.defaults,o=a.parents(s.giftVoucherForm),t=e(s.giftVoucherFormBtn,o),d=e(s.giftVoucherMessage,o).html(""),i=a.val();return t.prop("disabled",!0),e.isNumeric(i)?i<=0?(d.html(admwpp.giftVoucher.error.emptyAmount).addClass("admwpp-error"),!1):i>admwpp.giftVoucher.maxAmount?(d.html(admwpp.giftVoucher.error.maxAmount).addClass("admwpp-error"),!1):(t.prop("disabled",!1),!0):(d.html(admwpp.giftVoucher.error.notNumber).addClass("admwpp-error"),!1)},addGiftVoucher:function(a){var s=this,o=e.ADMShortcode.defaults,t=a.parents(o.giftVoucherForm),d=e(o.giftVoucherMessage,t).html("").removeClass("admwpp-error").removeClass("admwpp-success");if(!t.hasClass("admwpp-loading")){var i=e("input[name='"+o.giftVoucherFormAmount+"']",t);if(s.isValidGiftVoucherInput(i)){t.addClass("admwpp-loading"),a.prop("disabled",!0);var r={action:"addGiftVoucher",amount:i.val(),productOptionId:a.data("options_id"),cartId:"",portalToken:""};null!=weblink?(r.cartId=localStorage.getItem("weblink:"+webLinkConfig.portalAddress+":cartId"),r.portalToken=localStorage.getItem("weblink:"+webLinkConfig.portalAddress+":portalToken"),r.portal=webLinkConfig.portalAddress,e.ajax({type:"post",url:admwpp.ajaxUrl,data:r,dataType:"json",success:function(o){d.html(o.message),"success"===o.status?(d.addClass("admwpp-success"),null!=weblink&&o.cartId&&(weblink.cartId=o.cartId,localStorage.setItem("weblink:"+webLinkConfig.portalAddress+":cartId",o.cartId)),e(".weblink-Basket").length>0&&(s.message.display_message({message:o.message,success:!0}),location.reload())):d.addClass("admwpp-error"),i.val(""),t.removeClass("admwpp-loading"),a.prop("disabled",!0)}})):d.html(admwpp.giftVoucher.error.weblink).addClass("admwpp-error")}}}},e.ADMShortcode.defaults={giftVoucherForm:".admwpp-add-gift-voucher-form",giftVoucherFormBtn:".admwpp-add-gift-voucher-btn",giftVoucherFormAmount:"admwpp-gift-voucher-amount",giftVoucherFormAmountValidate:".admwpp-gift-voucher-amount-validate",giftVoucherMessage:".admwpp-message"}}(jQuery),function(e){e(document).ready(function(){var a=new e.ADMMessage;new e.ADMShortcode(a);jQuery().selectric&&e(".admwpp-custom-select").selectric();e(".admwpp-from-date").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,dateFormat:admwpp.search.dateFormat}),e(".admwpp-to-date").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,dateFormat:admwpp.search.dateFormat})})}(jQuery);