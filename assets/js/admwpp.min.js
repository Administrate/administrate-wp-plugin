!function(e){e.ADMShortcode=function(){var a=this;a.call=0;var t=e.ADMShortcode.defaults;e(t.giftVoucherFormBtn).length>0&&e(t.giftVoucherFormBtn).on("click",function(t){t.preventDefault();var o=e(this);a.addGiftVoucher(o)})},e.ADMShortcode.prototype={addGiftVoucher:function(a){var t=e.ADMShortcode.defaults,o=a.parents(t.giftVoucherForm),r=e(t.giftVoucherMessage,o).html("").removeClass("admwpp-error").removeClass("admwpp-success");if(!o.hasClass("admwpp-loading")){o.addClass("admwpp-loading"),a.prop("disabled",!0);var d=e("input[name='"+t.giftVoucherFormAmount+"']",o);if(d.val()<=0)return r.html(admwpp.giftVoucher.error.emptyAmount).addClass("admwpp-error"),o.removeClass("admwpp-loading"),void a.prop("disabled",!1);var n={action:"addGiftVoucher",amount:d.val(),productOptionId:a.data("options_id"),cartId:"",portalToken:""};null!=weblink?(n.cartId=localStorage.getItem("weblink:"+webLinkConfig.portalAddress+":cartId"),n.portalToken=localStorage.getItem("weblink:"+webLinkConfig.portalAddress+":portalToken"),n.portal=webLinkConfig.portalAddress,e.ajax({type:"post",url:admwpp.ajaxUrl,data:n,dataType:"json",success:function(e){r.html(e.message),"success"===e.status?r.addClass("admwpp-success"):r.addClass("admwpp-error"),d.val(""),o.removeClass("admwpp-loading"),a.prop("disabled",!1)}})):r.html(admwpp.giftVoucher.error.weblink).addClass("admwpp-error")}}},e.ADMShortcode.defaults={giftVoucherForm:".admwpp-add-gift-voucher-form",giftVoucherFormBtn:".admwpp-add-gift-voucher-btn",giftVoucherFormAmount:"admwpp-gift-voucher-amount",giftVoucherMessage:".admwpp-message"}}(jQuery),function(e){e(document).ready(function(){new e.ADMShortcode;jQuery().selectric&&e(".admwpp-custom-select").selectric();var a=admwpp.search.dateFormat,t=e(".admwpp-from-date").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:1}).on("change",function(){o.datepicker("option","minDate",r(this))}),o=e(".admwpp-to-date").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:1}).on("change",function(){t.datepicker("option","maxDate",r(this))});function r(t){var o;try{o=e.datepicker.parseDate(a,t.value)}catch(e){o=null}return o}})}(jQuery);